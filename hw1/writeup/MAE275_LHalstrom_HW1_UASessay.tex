
\typeout{}\typeout{If latex fails to find aiaa-tc, read the README file!}
%


\documentclass[]{aiaa-tc}% insert '[draft]' option to show overfull boxes

\usepackage{mathptmx}         %CHANGE FONT TO TIMES NEW ROMAN

\usepackage{amsmath}          % for formula writing (i.e. 'split', etc)
\usepackage{rotate}           %rotate/mirror images
\usepackage{cancel}           %draw lines through math to show "goes to zero"
\usepackage{xfrac}            %allows slated and side fractions
\usepackage{subcaption}       %allows captioning individual subfigures
\usepackage{multicol}         %enable environment with multiple columns
\usepackage[mode=buildnew]{standalone}% requires -shell-escape
  % compile with `pdflatex -shell-escape main` or `xelatex  -shell-escape main`



\usepackage{tikz}             %for creating vector graphics diagrams
\usetikzlibrary{backgrounds}  %put backgrounds behind tikz figures
\usetikzlibrary{calc}         %perform calculations within $$
\usetikzlibrary{positioning}  %position tikz elements using "right of, etc"
\usetikzlibrary{angles}       %label angles between lines with arcs
\usetikzlibrary{quotes}       %Put angle label in quotes
\usetikzlibrary{patterns}     %Patterns to fill shapes with







\usepackage{caption}          %caption graphics ('\captionof')
\usepackage{framed}           %allows shaded text
\usepackage[T1]{fontenc}      %allows escaping specific charaters like '_'


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%HYPERLINKS
\usepackage{hyperref}     %insert hyperlines with '\url' or '\href'
\newcommand\linkcolor{blue} %variable to color url text

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%CODE LISTING SYNTAX COLORING
\usepackage{color}     %make custom colors for syntax coloring
\usepackage{listings}  %allows code listings
\usepackage{textcomp}  %allows apostrophes to be straight (unidirectional)
% \usepackage{framed}
% \usepackage{caption}
\usepackage{bm}
\usepackage{tcolorbox}        %use for code listing color definitions
\tcbuselibrary{listings}      %allow color defenitions in code listings
\tcbuselibrary{breakable}     %allow tccolorboxes across page breaks
\tcbuselibrary{most}     %allow tccolorboxes across page breaks

\captionsetup[lstlisting]{font={small,tt}} %setup caption style

%Custom Colors
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\definecolor{sublimeblack}{HTML}{272822}
\definecolor{sublimered}{HTML}{F92672}
\definecolor{sublimeblue}{HTML}{66D9EF}
\definecolor{sublimeyellow}{HTML}{E6DB74}
\definecolor{sublimegrey}{HTML}{75715E}
\definecolor{sublimegreen}{HTML}{66CC33}
\definecolor{sublimeorange}{HTML}{FD971F}
\definecolor{sublimepurple}{HTML}{AE81FF}


%White or Black background toggle
\newcommand\whiteback{0}
\ifnum\whiteback=1%
  %White Background
  \newcommand\backclr{white}
  \newcommand\txtclr{\color{black}}
  \newcommand\txtupclr{black} %same as text color, used elsewhere
  \newcommand\comclr{\color{sublimegrey}}
  % \newcommand\comclr{\color{mygreen}}
  \newcommand\keyclr{\color{sublimeblue}}
  % \newcommand\keyclr{\color{blue}}
  \newcommand\ndkeyclr{\color{sublimered}}
  \newcommand\strclr{\color{mygreen}}
  % \newcommand\strclr{\color{sublimeyellow}}
  \newcommand\frameon{single} %single-frame box around code

\else
  %Black Background (like SublimeText)
  \newcommand\backclr{sublimeblack}
  \newcommand\txtclr{\color{white}} %text color
  \newcommand\txtupclr{white} %same as text color, used elsewhere
  \newcommand\comclr{\color{sublimegrey}}
  \newcommand\keyclr{\color{sublimeblue}}
  \newcommand\ndkeyclr{\color{sublimered}}
  \newcommand\strclr{\color{sublimeyellow}}
  \newcommand\frameon{false} %no frame for black background
\fi


%Listing Style
% \newcommand\lstfontsize{\scriptsize}
\newcommand\lstfontsize{\small}
\lstdefinestyle{mystyle}{%
  % backgroundcolor=\backclr,   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\ttfamily\txtclr\lstfontsize, % the SIZE OF THE FONTS that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  % breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\comclr,            % comment color
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=\frameon,                  % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  columns=flexible,
  otherkeywords={zip,enumerate,True,False,None,...},  %add words to be highlighted
  keywordstyle=\keyclr,            % keyword (e.g. 'print') color
  language=Python,                 % the language of the code
  upquote=true,                    % make apostrophes straight (unidirectional)
  alsoletter={<>=-+*/!},            % to avoid coloring operators when they're not
  ndkeywords={=,+,-,*,**,/,+=,*=,-=,/=,<=,>=,==,!=,<,>,... },  % operator keywords
  ndkeywordstyle=\ndkeyclr,         % style of operator keywords
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % line-number style: size, color
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\strclr,             % string color
  tabsize=4,                       % sets default tabsize
}


%Function that calls listing of specific file with custom coloring
  %first input is filename to list
  %next two inputs are start and end line numbers
    %(use 0 and large number for all lines)
\newcommand\mylisting[3]{
  \tcbinputlisting{
        listing file=#1,
        breakable,
        nobeforeafter,
        arc=0pt,
        top=0mm,
        bottom=0mm,
        left=0mm,
        right=0mm,
        boxrule=0pt,
        colback=\backclr, %background color (continue accross page breaks)
        colupper=\txtupclr, %basic text color (continue accross page breaks)
        listing only,
        listing options={
                            style=mystyle,            %use custom style
                            firstline=#2,lastline=#3, %lines of code to use
                            firstnumber=#2,           %same numbering as script
                        },
        % hbox %Turning this on prevents page breaks
      }
}







  \title{MAE 298 Aeroacoustics -- Homework\#4 \\ Turbomachinery Noise}


\author{
  Logan D. Halstrom \\
  {\normalsize\itshape Graduate Student} \\
  {\normalsize\itshape Department of Mechanical and Aerospace Engineering} \\
  {\normalsize\itshape University of California, Davis, CA 95616}
       }


 % Define commands to assure consistent treatment throughout document
 \newcommand{\eqnref}[1]{(\ref{#1})}
 \newcommand{\class}[1]{\texttt{#1}}
 \newcommand{\package}[1]{\texttt{#1}}
 \newcommand{\file}[1]{\texttt{#1}}
 \newcommand{\BibTeX}{\textsc{Bib}\TeX}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\maketitle


% % %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \begin{abstract}

% Abstract about lit study

% \end{abstract}





% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \section*{Nomenclature}

% \begin{multicols}{2}

% \begin{tabbing}
%   XXX \= \kill% this line sets tab stop
%   $0$                 \> Subscript for quiescent parameters \\
%   $e$                 \> Subscript for emission parameters \\
%   $L$                 \> Subscript for loading parameters \\
%   $t$                 \> Time \\
%   $\tau$              \> Retarded time \\
%   $ret$               \> Evaluated at retarded time \\
%   $\hat{n}$           \> Unit surface normal vector \\
%   $\vec{r}$           \> Radial direction vector \\
%   $\hat{r}$           \> Radial unit vector \\
%   $r$                 \> Magnitude of radial vector $|\vec{r}|$ \\
%   $\theta$            \> Angle between $\hat{n}$ and $\hat{r}$ \\
%   $f$                 \> Function of surfaces within a fluid space \\
%   $\vec{V}$           \> General velocity vector \\
%   $V_r$               \> Velocity component in radial direction \\
%   $V_n$               \> Velocity component in surface normal direction \\
%   $M$                 \> Mach number \\
%   $c$                 \> Speed of Sound\\
%   $\overline{\rho}$   \> Mean density \\
%   $p$                 \> Pressure  \\
%   $\widetilde{p}$     \> Pressure (Discontinuous across data surface)  \\
%   $\overline{p}$      \> Mean pressure \\
%   $p'$                \> Perturbation pressure \\
%   $\Delta P$          \> Pressure difference from CFD solution \\
%   $L$                 \> Pressure loading \\
%   $\overline{\partial}$ \> Generalized derivative \\
%   $\delta$            \> Dirac delta function \\
%   \scriptsize{FW-H}   \> Ffowcs Williams-Hawkings\\






% \end{tabbing}

% \end{multicols}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Problem Statement}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

You are designing a new aircraft engine and analyzing acoustic propagation generated by a non-uniform flow with angle of attack interacting with rotating fans. You obtained flow fields from CFD for a one-sixth small scale of the engine. The radius for the small scale engine is 13 in and the hub radius is 3 in. CFD provides the velocity gust information as a function of its circumferential modes. The circumferential mode for acoustics can be expressed as $m = nB − kV$ where $B$ is the number of blades, $V$ is the number of vanes, $n$ stands for the harmonic of BPF and $k$ is the integer (1, 2, 3...). You consider only positive $k$ at this time (this is related the rotation direction of gust). The number of blades is 18. The number of vanes is considered to be 1 since there is no physical vanes but there is one revolution difference. The Mach number is 0.525 and the fan RPM is 8326.3042, the speed of sound is 13503.937009 in/s and the density is 1.4988E-5 slug/in\^3. The dominant noise is generated at the 1st BPF or $n=1$ in which the
angular frequency $\omega$ is given as $RPM \times \frac{2\pi}{60}\times B$. We are interested in the propagation through the inlet of !"
the engine so that sound propagates to $–z$ direction assuming the $+z$ direction is in the flow direction.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Eigenvalues}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

1. [20 points] Determine the first five eigenvalues of acoustics for m=18, 17, 16, 15 or (k=1, 2, 3, 4) or (m,n)=(18,0), (18,1), (18,2), (18,3), (18,4), (17,0), (17,1), (17,2), (17,3), (17,4), (16,0), (16,1), (16,2), (16,3), (16,4), (15,0), (15,1), (15,2), (15,3), (15,4)


\begin{table}[htb]
\begin{centering}
\begin{tabular}{| c | c c c c |}
\hline
% {} & \multicolumn{4}{c}{m} \\
{} &  $\mathbf{m=18}$ &  $\mathbf{m=17}$ &  $\mathbf{m=16}$ &  $\mathbf{m=15}$ \\
\hline
$\mathbf{n=0}$ &       1.5495 &         1.4696 &         1.3895 &         1.3093 \\
$\mathbf{n=1}$ &       1.9612 &         1.8755 &         1.7896 &         1.7032 \\
$\mathbf{n=2}$ &       2.2823 &         2.1932 &         2.1036 &         2.0137 \\
$\mathbf{n=3}$ &       2.5772 &         2.4855 &         2.3932 &         2.3005 \\
$\mathbf{n=4}$ &       2.8585 &         2.7646 &         2.6702 &         2.5753 \\
\hline
\end{tabular}
\caption{Eigenvalues $\mu$ for all modes}
\end{centering}
\end{table}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Eigenfunctions}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

2. [20 points] Plot the five eigenfunctions (radial modes, n=0, 1, 2, 3, 4) for m=18, 17, 16, 15 or (k=1, 2, 3, 4) and verify n describes the number of zero crossings in the radial direction


%%\vspace{-2em}
\begin{figure}[htb!]
\begin{center}
\includegraphics[width=\textwidth]{../Plots/2_eigenfunctions.png}
\caption{Eigenfunctions of all modes showing zero crossings corresponding to $n$}
\label{eigenfuncs}
\end{center}
\end{figure}
%%\vspace{-2em}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Wavenumbers}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

3. [20 points] Determine the wavenumbers in the z direction for (m,n)=(18,0), (18,1), (18,2), (17,0), (17,1), (17,2), (16,0), (16,1), (16,2), (15,0), (15,1), (15,2). Indicate whether the mode is cut-on (propagating) or cut-off (exponentially decaying). Consider only the propagation in the –z direction. Exclude the exponentially growing solution and include only the propagating solutions or exponentially decaying solutions.

\begin{table}[htb]
\begin{centering}
\begin{tabular}{| c c c c |}
\hline
$\mathbf{m}$ &  $\mathbf{n}$ &                      $\mathbf{K_z}$ & $\mathbf{Cut-on}$ \\
\hline
18 &             0 &  (-0.842342752252+0.860467931211j) &                No \\
18 &             1 &    (-0.842342752252+1.6539375966j) &                No \\
18 &             2 &   (-0.842342752252+2.14865069168j) &                No \\
\hline
17 &             0 &  (-0.842342752252+0.63804009925j) &                No \\
17 &             1 &   (-0.842342752252+1.5105548176j) &                No \\
17 &             2 &  (-0.842342752252+2.01642513534j) &                No \\
\hline
16 &             0 &  (-0.842342752252+0.301624659942j) &                No \\
16 &             1 &   (-0.842342752252+1.35896420335j) &                No \\
16 &             2 &    (-0.842342752252+1.8801224576j) &                No \\
\hline
15 &             0 &              (-0.386366560427+0j) &               Yes \\
15 &             1 &  (-0.842342752252+1.19608312922j) &                No \\
15 &             2 &  (-0.842342752252+1.73881279925j) &                No \\
\hline
\end{tabular}
\caption{Axial wavenumbers $K_z$ for certain modes and associated cut-on condition}
\end{centering}
\end{table}





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Modal Power Levels}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

4. [30 points] The pressure distribution file at z=0 plane for m=18 or 1 BPF is provided. The first column is the dimensional radius [in], the second column the real part of the pressure [psi], and the third column is the imaginary part of the pressure [psi]. Using this boundary condition, compute the sound power level for (m,n)=(18,0), (18,1), (18,2). This noise is considered for blade self noise that is not associated with the gust response since k=0. Note that the z=0 plane is not the same as the engine inlet. Use the conversion for the unit for the sound power as follows: $PWL(dB) = 10*\log_{10}(W_{mn}) - 10*\log_{10}(7.3756E-13)$

\begin{table}[htb]
\begin{centering}
\begin{tabular}{| c | c |}
\hline
$\mathbf{n}$ &  $\mathbf{PWL (dB)}$ \\
\hline
$\mathbf{0}$ &       -10.4015 \\
$\mathbf{1}$ &       -13.3776 \\
$\mathbf{2}$ &       -22.3880 \\
\hline
\end{tabular}
\caption{Sound Power Levels in dB of modal power of $m=18$ circumferential mode}
\end{centering}
\end{table}





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%APPENDIX (CODE LISTING)

\clearpage
% \onecolumn      %change to single column
\appendix       %%% starting appendix

%SETUP
\newcommand\scriptname{dummy}      %init code name variable

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Appendix A: Global Variable Storage Script}
\renewcommand\scriptname{hw4_98_globalVars.py}
\begin{center}
\mylisting{../\scriptname}{0}{10000}
% \vspace{-0.2cm}
% \captionof{lstlisting}{\emph{\scriptname} - Stores global variables for usage in all other scripts}
\end{center}

\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Appendix B: Main Data Processing and Plotting Script}
\renewcommand\scriptname{hw4_00_process.py}
\begin{center}
\mylisting{../\scriptname}{0}{10000}
% \vspace{-0.2cm}
% \captionof{lstlisting}{\emph{\scriptname} - Stores global variables for usage in all other scripts}
\end{center}





\end{document}


